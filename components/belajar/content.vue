<template>
  <div class="flex flex-col gap-1 *:text-balance *:text-justify">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus aliquam sem at laoreet rutrum. Integer ultrices lectus a efficitur suscipit. Donec posuere enim et quam commodo, nec lobortis risus tempus. Praesent sit amet lacinia ipsum. Mauris laoreet vitae leo ut fringilla. Donec eros lacus, maximus id efficitur volutpat, venenatis tempus quam. </p>

    <h3 id="bagian-1" class="text-2xl">Bagian 1</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at risus sed erat viverra fermentum quis sed urna. Aliquam tristique aliquam efficitur. Nulla facilisi. Quisque blandit tincidunt felis, at porttitor metus malesuada sit amet. Duis in ultricies risus, ac tincidunt leo. Vivamus sed justo orci. Etiam quis molestie metus. Ut vestibulum tellus id orci laoreet, ut ultricies erat vehicula. Sed sodales diam ligula, id porta nulla semper a. In quis condimentum purus, sit amet pulvinar enim.</p>
    <p>Quisque mauris nibh, molestie et nunc fermentum, faucibus placerat turpis. Vivamus venenatis neque at velit elementum posuere. Aliquam et condimentum nisi, ac laoreet nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce nec ultricies massa. Vivamus laoreet sed magna vel viverra. Quisque ac nisi malesuada, blandit leo feugiat, posuere elit. Vestibulum tincidunt ultricies neque, at venenatis nisi suscipit vitae. Curabitur porta cursus sapien non imperdiet. In hac habitasse platea dictumst. Integer vitae venenatis purus. Mauris a tristique urna. Nullam facilisis neque sit amet urna imperdiet, nec euismod arcu dignissim. Integer eu nulla tempus, sagittis nibh non, mattis odio. Etiam aliquet sapien sem, id feugiat lorem gravida tempor. Nam imperdiet massa id nisl sodales, nec molestie sem varius.</p>

    <h3 id="bagian-2" class="text-2xl">Bagian 2</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at risus sed erat viverra fermentum quis sed urna. Aliquam tristique aliquam efficitur. Nulla facilisi. Quisque blandit tincidunt felis, at porttitor metus malesuada sit amet. Duis in ultricies risus, ac tincidunt leo. Vivamus sed justo orci. Etiam quis molestie metus. Ut vestibulum tellus id orci laoreet, ut ultricies erat vehicula. Sed sodales diam ligula, id porta nulla semper a. In quis condimentum purus, sit amet pulvinar enim.</p>
    <p>Quisque mauris nibh, molestie et nunc fermentum, faucibus placerat turpis. Vivamus venenatis neque at velit elementum posuere. Aliquam et condimentum nisi, ac laoreet nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce nec ultricies massa. Vivamus laoreet sed magna vel viverra. Quisque ac nisi malesuada, blandit leo feugiat, posuere elit. Vestibulum tincidunt ultricies neque, at venenatis nisi suscipit vitae. Curabitur porta cursus sapien non imperdiet. In hac habitasse platea dictumst. Integer vitae venenatis purus. Mauris a tristique urna. Nullam facilisis neque sit amet urna imperdiet, nec euismod arcu dignissim. Integer eu nulla tempus, sagittis nibh non, mattis odio. Etiam aliquet sapien sem, id feugiat lorem gravida tempor. Nam imperdiet massa id nisl sodales, nec molestie sem varius.</p>

    <h3 id="bagian-3" class="text-2xl">Bagian 3</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at risus sed erat viverra fermentum quis sed urna. Aliquam tristique aliquam efficitur. Nulla facilisi. Quisque blandit tincidunt felis, at porttitor metus malesuada sit amet. Duis in ultricies risus, ac tincidunt leo. Vivamus sed justo orci. Etiam quis molestie metus. Ut vestibulum tellus id orci laoreet, ut ultricies erat vehicula. Sed sodales diam ligula, id porta nulla semper a. In quis condimentum purus, sit amet pulvinar enim.</p>
    <p>Quisque mauris nibh, molestie et nunc fermentum, faucibus placerat turpis. Vivamus venenatis neque at velit elementum posuere. Aliquam et condimentum nisi, ac laoreet nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce nec ultricies massa. Vivamus laoreet sed magna vel viverra. Quisque ac nisi malesuada, blandit leo feugiat, posuere elit. Vestibulum tincidunt ultricies neque, at venenatis nisi suscipit vitae. Curabitur porta cursus sapien non imperdiet. In hac habitasse platea dictumst. Integer vitae venenatis purus. Mauris a tristique urna. Nullam facilisis neque sit amet urna imperdiet, nec euismod arcu dignissim. Integer eu nulla tempus, sagittis nibh non, mattis odio. Etiam aliquet sapien sem, id feugiat lorem gravida tempor. Nam imperdiet massa id nisl sodales, nec molestie sem varius.</p>

    <h3 id="bagian-4" class="text-2xl">Bagian 4</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at risus sed erat viverra fermentum quis sed urna. Aliquam tristique aliquam efficitur. Nulla facilisi. Quisque blandit tincidunt felis, at porttitor metus malesuada sit amet. Duis in ultricies risus, ac tincidunt leo. Vivamus sed justo orci. Etiam quis molestie metus. Ut vestibulum tellus id orci laoreet, ut ultricies erat vehicula. Sed sodales diam ligula, id porta nulla semper a. In quis condimentum purus, sit amet pulvinar enim.</p>
    <p>Quisque mauris nibh, molestie et nunc fermentum, faucibus placerat turpis. Vivamus venenatis neque at velit elementum posuere. Aliquam et condimentum nisi, ac laoreet nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce nec ultricies massa. Vivamus laoreet sed magna vel viverra. Quisque ac nisi malesuada, blandit leo feugiat, posuere elit. Vestibulum tincidunt ultricies neque, at venenatis nisi suscipit vitae. Curabitur porta cursus sapien non imperdiet. In hac habitasse platea dictumst. Integer vitae venenatis purus. Mauris a tristique urna. Nullam facilisis neque sit amet urna imperdiet, nec euismod arcu dignissim. Integer eu nulla tempus, sagittis nibh non, mattis odio. Etiam aliquet sapien sem, id feugiat lorem gravida tempor. Nam imperdiet massa id nisl sodales, nec molestie sem varius.</p>
    
    <h3 id="bagian-5" class="text-2xl">Bagian 5</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse at risus sed erat viverra fermentum quis sed urna. Aliquam tristique aliquam efficitur. Nulla facilisi. Quisque blandit tincidunt felis, at porttitor metus malesuada sit amet. Duis in ultricies risus, ac tincidunt leo. Vivamus sed justo orci. Etiam quis molestie metus. Ut vestibulum tellus id orci laoreet, ut ultricies erat vehicula. Sed sodales diam ligula, id porta nulla semper a. In quis condimentum purus, sit amet pulvinar enim.</p>
    <p>Quisque mauris nibh, molestie et nunc fermentum, faucibus placerat turpis. Vivamus venenatis neque at velit elementum posuere. Aliquam et condimentum nisi, ac laoreet nibh. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce nec ultricies massa. Vivamus laoreet sed magna vel viverra. Quisque ac nisi malesuada, blandit leo feugiat, posuere elit. Vestibulum tincidunt ultricies neque, at venenatis nisi suscipit vitae. Curabitur porta cursus sapien non imperdiet. In hac habitasse platea dictumst. Integer vitae venenatis purus. Mauris a tristique urna. Nullam facilisis neque sit amet urna imperdiet, nec euismod arcu dignissim. Integer eu nulla tempus, sagittis nibh non, mattis odio. Etiam aliquet sapien sem, id feugiat lorem gravida tempor. Nam imperdiet massa id nisl sodales, nec molestie sem varius.</p>
  </div>
</template>

<script setup lang="ts">
const emit = defineEmits<{
  updateListBagian: [listBagianBaru: { [key: string]: number }]
}>()
const { width } = useWindowSize()

const listBagian = [
  'bagian-1',
  'bagian-2',
  'bagian-3',
  'bagian-4',
  'bagian-5',
]

const listBagianBaru = ref<{[key: string]:number}>({})

const getYBagian = () => {
  listBagian.forEach((item) => {
    const element = document.getElementById(item)
    if (element) {
      const y = element.getBoundingClientRect().top + window.pageYOffset
      // console.log(`Nilai y untuk ${item}: ${y}`)
      listBagianBaru.value = {
        ...listBagianBaru.value,
        [item]: y,
      }
      // Lakukan sesuatu dengan nilai y di sini
    }
  })
}

onMounted(() => {
  getYBagian()
  emit('updateListBagian', listBagianBaru.value!)
})
watch(width, ()=>{
  getYBagian()
  emit('updateListBagian', listBagianBaru.value!)
})

</script>